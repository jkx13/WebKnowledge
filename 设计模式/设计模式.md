## å•ä¾‹æ¨¡å¼
	ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®å˜é‡ï¼Œæ¯”å¦‚çº¿ç¨‹æ± /å…¨å±€ç¼“å­˜/æµè§ˆå™¨windowå¯¹è±¡ç­‰ã€‚
ä¾‹å¦‚å¼¹çª—å®ç°(createSingleç®¡ç†å•ä¾‹å¯¹è±¡ï¼Œé—­åŒ…å­˜å‚¨å®ä¾‹åªåˆ›å»ºä¸€ä¸ªå¼¹çª—å®ä¾‹)
```javascript
var createSingle = (function () {
    let instance = {};
    return function (fn) {
        if (!instance[fn.name]) {
            instance[fn.name] = fn.apply(this, arguments);
        }

        return instance[fn.name];
    }
})();
var createLoginLarger = () => {
    let div = document.createElement('div');
    div.innerHTML = 'å¼¹çª—';
    div.style.display = 'none';

    document.body.appendChild(div);

    return div;
};

document.getElementById('btn').onclick = () => {
    const loginlayer = createSingle(createLoginLarger);
    loginlayer.style.display = 'block';
}
```

## ç­–ç•¥æ¨¡å¼
	å°†ä¸€ä¸ªä¸€ä¸ªçš„ç­–ç•¥æ–¹æ³•åˆ†åˆ«å°è£…èµ·æ¥(å…·ä½“ç®—æ³•å’Œè®¡ç®—è¿‡ç¨‹åŠç®—æ³•çš„å®ç°å’Œç®—æ³•çš„ä½¿ç”¨æ˜¯åˆ†ç¦»çš„ï¼Œä»£ç æ¸…æ™°èŒè´£æ˜ç¡®)ï¼Œå¯ä»¥ç›¸äº’æ›¿æ¢
ä¾‹å¦‚è®¡ç®—ä¸åŒä¸šç»©æ°´å¹³çš„å¹´ç»ˆå¥–åŠ±(åˆ†ä¸åŒä¸šç»©æ°´å¹³A/B/Cä¸ºå·¥èµ„çš„å¤šå°‘å€)
```javascript
const strategies = {
	A:(salary)=>salary*3,
	B:(salary)=>salary*2,
	C:(salary)=>salary*1
}

const calculateBonus = (level,salary)=>{
	return strategies[level](salary);
}

calculateBonus('A',19000);
```

## ä»£ç†æ¨¡å¼
	å°±æ˜¯å®ç°ä¸€ä¸ªå¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œç”¨æˆ·è®¿é—®å¯¹è±¡å®é™…è®¿é—®çš„æ˜¯ä»£ç†å¯¹è±¡ã€‚
ä¾‹å¦‚å¤–å–é€èŠ±
```javascript
const Flower = function(){return 'èŠ±ğŸŒ¹'};

//ç”·å­©
const goodBoy = {
	sendFlower:function(target){
		const flower = Flower();
		target.receiveFlower(flower);
	}
}

//å¥³å­©
const goodGirl = {
	receiveFlower:function(flower){
		console.log(`æ”¶åˆ°${flower}å“‡ï½`);
	},
	myAddress:function(){
		return new Promise((resovle,reject)=>{
			resovle('å¥³å­©åœ°å€æ˜¯XXX')
		})
	}
}

//å¤–å–å°å“¥
const takeMan = {
	receiveFlower:function(flower){
		goodGirl.myAddress().then((address)=>{
			console.log(address);
			goodGirl.receiveFlower(flower);
		})
	}
}

goodBoy.sendFlower(takeMan);

```
å¤§å›¾ç‰‡åŠ è½½ç©ºç™½ä½¿ç”¨ä»£ç†åŠ è½½
```javascript
const imgNode = (function () {
    const img = document.createElement('img');
    document.body.appendChild(img);
    return {
        setSrc: function (src) {
            img.src = src;
        }
    }
})();

const loadingImg = './loading.gif'//åŠ è½½å›¾ç‰‡
const imageSrc = 'http://www.xxx.com/j.png'//åŸå›¾è®¿é—®

const proxyImg = (function () {
    const image = new Image();
    image.onload = function () {
        imgNode.setSrc(image.src);
    }
    return {
        setSrc: function (src) {
            imgNode.setSrc(loadingImg);
            image.src = src;
        }
    }
})();

proxyImg.setSrc(imgageSrc);
```

## å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼)
	å½“å¯¹è±¡æ˜¯1å¯¹å¤šçš„ä¾èµ–å…³ç³»æ—¶ï¼Œä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°±ä¼šé€šçŸ¥å…¶ä»–ä¾èµ–å¯¹è±¡ã€‚
```javascript
const PubFn = {
	subscribe:function(type,callback){
		this.allCallback && this.allCallback={};
		(this.allCallback[type] || this.allCallback[type] = []).push(callback);
	},
	publish:function(){
		const args = [...arguments];
		const type = args.shift();
		
		if(!this.allCallback[type]) return;
		
		this.allCallback[type].forEach(callback=>{
			if(typeof(callback) === 'function' && callback)
			callback(...args);
		})
	}
}
```

## è£…é¥°å™¨æ¨¡å¼
	ç»™å¯¹è±¡åŠ¨æ€å¢åŠ åŠŸèƒ½(åœ¨ä¸ä¿®æ”¹ç°æœ‰å¯¹è±¡æ–°å¢åŠŸèƒ½)
```javascript
const before = function(fn,beforeFn){
	return function(){
		beforeFn.apply(this,arguments);
		return fn.apply(this,arguments);
	}
}
const after = function(fn,afterFn){
	return function(){
		const __ = fn.apply(this,arguments);
		afterFn.apply(this,arguments);
		return __;
	}
}

const ajax = function () {
    console.log('ajax==');
    console.log(arguments);
}

const changeFn = function (type,url,params) {
    params.token = 'sdfds';
}

before(ajax,changeFn)('text','https://wwww',{name:'jk'})

```

## èŒè´£é“¾æ¨¡å¼
	è§£è€¦å¤šä¸ªæ‰§è¡Œå¯¹è±¡ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åº”è¦æ±‚çš„å¯¹è±¡
```javascript
const Chain = function (fn) {
    this.fn = fn;
    this.successor = null;
}

Chain.prototype.setNextSuccessor = function (successor) {
    return this.successor = successor;
}

Chain.prototype.passRequest = function () {
    const ret = this.fn.apply(this, arguments);
    if (ret === 'nextSuccessor') {
        return this.successor && this.successor.passRequest.apply(this.successor, arguments);
    }
    return ret;
}


const order500 = function (orderType) {
    if (orderType === 500) {
        console.log('å·²ä»˜æ¬¾500å®šé‡‘å¾—100ä¼˜æƒ åˆ¸');
    } else {
        console.log('ä¸æ˜¯è¯¥500å®šé‡‘==');
        return 'nextSuccessor';
    }
}

const order200 = function (orderType) {
    if (orderType === 200) {
        console.log('å·²ä»˜æ¬¾200å®šé‡‘å¾—50ä¼˜æƒ åˆ¸');
    } else {
        console.log('ä¸æ˜¯è¯¥200å®šé‡‘==');
        return 'nextSuccessor';
    }
}

const chainOrder500 = new Chain(order500);

const chainOrder200 = new Chain(order200);

chainOrder500.setNextSuccessor(chainOrder200);

chainOrder500.passRequest(500);

```